<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Martin Vector Tiles – Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet"/>
    <style>
      html,body,#map { height:100%; margin:0; }
      .legend {
        position:absolute; bottom:12px; left:12px; background:#fff; padding:8px 10px; 
        font:12px/1.4 system-ui, sans-serif; border-radius:6px; box-shadow:0 1px 6px rgba(0,0,0,.15);
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <div class="legend">
      <div><span style="color:#d95f02;">■</span> Polygons</div>
      <div><span style="color:#1b9e77;">●</span> Points</div>
    </div>

    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
    <script>
      const map = new maplibregl.Map({
        container: 'map',
        style: {
            version: 8,
            sources: {
                osm: {
                    type: 'raster',
                    tiles: ["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],
                    tileSize: 256,
                    attribution: '© OpenStreetMap contributors'
                },
                ls_polygons: {
                    type: 'vector',
                    tiles: ["http://localhost:3000/ls_polygons/{z}/{x}/{y}"],
                    minzoom: 0,
                    maxzoom: 14
                },
                ls_points: {
                    type: 'vector',
                    tiles: ["http://localhost:3000/ls_points/{z}/{x}/{y}"],
                    minzoom: 0,
                    maxzoom: 14
                }
            },
            layers: [
                {id: 'osm-basemap', type: 'raster', source: 'osm'},
                {
                    id: 'ls-polygons-fill',
                    type: 'fill',
                    source: 'ls_polygons',
                    'source-layer': 'ls_polygons',
                    paint: {'fill-color': '#d95f02', 'fill-opacity': 0.35}
                },
                {
                    id: 'ls-polygons-outline',
                    type: 'line',
                    source: 'ls_polygons',
                    'source-layer': 'ls_polygons',
                    paint: {'line-color': '#d95f02', 'line-width': 1}
                },
                {
                    id: 'ls-points',
                    type: 'circle',
                    source: 'ls_points',
                    'source-layer': 'ls_points',
                    paint: {
                        'circle-radius': 4,
                        'circle-color': '#1b9e77',
                        'circle-stroke-color': '#333',
                        'circle-stroke-width': 0.5
                    }
                }
            ]
        },
        center: [-123.5, 46.8],
        zoom: 5
      });

      map.addControl(new maplibregl.NavigationControl(), 'top-right');
    </script>
  </body>
</html>